{"version":3,"sources":["ng-image-gallery.min.js"],"names":["keys","enter","esc","left","right","angular","module","provider","defOpts","thumbnails","inline","bubbles","imgBubbles","bgClose","piracy","imgAnim","setOpts","newOpts","extend","$get","directive","$parse","scope","link","element","attrs","bind","event","preventDefault","$rootScope","$timeout","$q","ngImageGalleryOpts","replace","transclude","restrict","images","methods","conf","onOpen","onClose","template","elem","attr","showLoader","imgLoading","hideLoader","loadImg","imgObj","reject","deferred","defer","hasOwnProperty","img","Image","src","url","onload","cached","resolve","promise","setActiveImg","indexOf","activeImg","length","imgMoveDirection","then","undefined","$watchCollection","noop","imagesFirstWatch","$watch","activeImageIndex","activeImageIndexFirstWatch","newImgIndex","open","imgIndex","opened","document","body","addClass","close","removeClass","next","prev","backgroundClose","e","noCloseClasses","i","target","classList","which","window","Hammer","hammerElem","on","ev","removeClassFromDocumentBody","$on"],"mappings":"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","file":"ng-image-gallery.min.js","sourcesContent":[" (function(){\r\n\t'use strict';\r\n\t\r\n\t// Key codes\r\n\tvar keys = {\r\n\t\tenter : 13,\r\n\t\tesc   : 27,\r\n\t\tleft  : 37,\r\n\t\tright : 39\r\n\t};\r\n\r\n\tangular\r\n\t.module('thatisuday.ng-image-gallery', ['ngAnimate'])\r\n\t.provider('ngImageGalleryOpts', function(){\r\n\t\tvar defOpts = {\r\n\t\t\tthumbnails  \t:   true,   \r\n\t\t\tinline      \t:   false,\r\n\t\t\tbubbles     \t:   true,\r\n\t\t\timgBubbles  \t:   false,   \r\n\t\t\tbgClose     \t:   false,\r\n\t\t\tpiracy \t\t\t: \tfalse,\r\n\t\t\timgAnim \t\t: \t'fadeup',\r\n\t\t};\r\n\r\n\t\treturn{\r\n\t\t\tsetOpts : function(newOpts){\r\n\t\t\t\tangular.extend(defOpts, newOpts); \r\n\t\t\t},\r\n\t\t\t$get : function(){\r\n\t\t\t\treturn defOpts;\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t.directive('ngRightClick', ['$parse', function($parse){\r\n\t    return {\r\n\t    \tscope : false,\r\n\t\t\tlink : function(scope, element, attrs){\r\n\t\t\t\telement.bind('contextmenu', function(event){\r\n\t\t\t\t\tif(scope.piracy == false){\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\treturn scope.piracy;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t    };\r\n\t}])\r\n\t.directive('ngImageGallery', ['$rootScope', '$timeout', '$q', 'ngImageGalleryOpts',\r\n\tfunction($rootScope, $timeout, $q, ngImageGalleryOpts){\r\n\t\treturn {\r\n\t\t\treplace : true,\r\n\t\t\ttransclude : false,\r\n\t\t\trestrict : 'AE',\r\n\t\t\tscope : {\r\n\t\t\t\timages \t\t\t: \t'=',\t\t// []\r\n\t\t\t\tmethods \t\t: \t'=?',\t\t// {}\r\n\t\t\t\tconf \t\t\t: \t'=?',\t\t// {}\r\n\r\n\t\t\t\tthumbnails \t\t: \t'=?',\t\t// true|false\r\n\t\t\t\tinline \t\t\t: \t'=?',\t\t// true|false\r\n\t\t\t\tbubbles \t\t: \t'=?',\t\t// true|false\r\n\t\t\t\timgBubbles \t\t: \t'=?',\t\t// true|false\r\n\t\t\t\tbgClose \t\t: \t'=?',\t\t// true|false\r\n\t\t\t\tpiracy\t\t\t: \t'=?',\t\t// true|false\r\n\t\t\t\timgAnim \t\t: \t'@?',\t\t// {name}\r\n\r\n\t\t\t\tonOpen \t\t\t: \t'&?',\t\t// function\r\n\t\t\t\tonClose \t\t: \t'&?'\t\t// function\r\n\t\t\t},\r\n\t\t\ttemplate : \t'<div class=\"ng-image-gallery img-move-dir-{{imgMoveDirection}}\" ng-class=\"{inline:inline}\">'+\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Thumbnails container\r\n\t\t\t\t\t\t\t//  Hide for inline gallery\r\n\t\t\t\t\t\t\t'<div ng-if=\"thumbnails && !inline\" class=\"ng-image-gallery-thumbnails\">'+\r\n\t\t\t\t\t\t\t\t'<div class=\"thumb\" ng-repeat=\"image in images track by $index\" ng-click=\"methods.open($index);\" ng-style=\"{ \\'background-image\\': \\'url(\\' + (image.thumbUrl || image.url) + \\')\\' }\"  ng-attr-title=\"{{image.title || undefined}}\"></div>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t// Modal container\r\n\t\t\t\t\t\t\t// (inline container for inline modal)\r\n\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-modal\" ng-show=\"opened\" ng-cloak>' +\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// Gallery backdrop container\r\n\t\t\t\t\t\t\t\t// (hide for inline gallery)\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-backdrop\" ng-if=\"!inline\"></div>'+\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// Gallery contents container\r\n\t\t\t\t\t\t\t\t// (hide when image is loading)\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-content\" ng-show=\"!imgLoading\" ng-click=\"backgroundClose($event);\">'+\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// destroy icons container\r\n\t\t\t\t\t\t\t\t\t'<div class=\"destroy-icons-container\">'+\r\n\t\t\t\t\t\t\t\t\t\t// External link icon\r\n\t\t\t\t\t\t\t\t\t\t'<a class=\"ext-url\" ng-repeat=\"image in images track by $index\" ng-if=\"activeImg == image && image.extUrl\" href=\"{{image.extUrl}}\"></a>'+\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Close Icon (hidden in inline gallery)\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"close\" ng-click=\"methods.close();\" ng-if=\"!inline\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t\t\t// Prev-Next Icons\r\n\t\t\t\t\t\t\t\t\t// Add `bubbles-on` class when bubbles are enabled (for offset)\r\n\t\t\t\t\t\t\t\t\t'<div class=\"prev\" ng-click=\"methods.prev();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"next\" ng-click=\"methods.next();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\r\n\r\n\t\t\t\t\t\t\t\t\t// Galleria container\r\n\t\t\t\t\t\t\t\t\t'<div class=\"galleria\">'+\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t// Images container\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-images img-anim-{{imgAnim}} img-move-dir-{{imgMoveDirection}}\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t'<img class=\"galleria-image\" ng-right-click ng-repeat=\"image in images track by $index\" ng-if=\"activeImg == image\" ng-src=\"{{image.url}}\" ondragstart=\"return false;\" ng-attr-title=\"{{image.title || undefined}}\" ng-attr-alt=\"{{image.alt || undefined}}\"/>'+\r\n\t\t\t\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Bubble navigation container\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" ng-if=\"bubbles && !imgBubbles\"  ng-hide=\"images.length == 1\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble\" ng-click=\"setActiveImg(image);\" ng-repeat=\"image in images track by $index\" ng-class=\"{active : (activeImg == image)}\"></span>'+\r\n\t\t\t\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Image bubble navigation container\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" ng-if=\"bubbles && imgBubbles\" ng-hide=\"images.length == 1\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble img-bubble\" ng-click=\"setActiveImg(image);\" ng-repeat=\"image in images track by $index\" ng-class=\"{active : (activeImg == image)}\" ng-style=\"{ \\'background-image\\': \\'url(\\' + (image.bubbleUrl || image.thumbUrl || image.url) +\\')\\' }\"></span>'+\r\n\t\t\t\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t\t\t'</div>'+\r\n\r\n\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// Loading animation overlay container\r\n\t\t\t\t\t\t\t\t// (show when image is loading)\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-loader\" ng-show=\"imgLoading\">'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"spinner\">'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect1\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect2\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect3\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect4\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect5\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t'</div>',\r\n\t\t\t\t\t\t\r\n\t\t\tlink : function(scope, elem, attr){\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\t *\tOperational functions\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Show gallery loader\r\n\t\t\t\tscope.showLoader = function(){\r\n\t\t\t\t\tscope.imgLoading = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Hide gallery loader\r\n\t\t\t\tscope.hideLoader = function(){\r\n\t\t\t\t\tscope.imgLoading = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Image load complete promise\r\n\t\t\t\tscope.loadImg = function(imgObj){\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Return rejected promise\r\n\t\t\t\t\t// if not image object received\r\n\t\t\t\t\tif(!imgObj) return $q.reject();\r\n\r\n\t\t\t\t\tvar deferred =  $q.defer();\r\n\r\n\t\t\t\t\t// Show loder\r\n\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope.showLoader();\r\n\r\n\t\t\t\t\t// Process image\r\n\t\t\t\t\tvar img = new Image();\r\n\t\t\t\t\timg.src = imgObj.url;\r\n\t\t\t\t\timg.onload = function(){\r\n\t\t\t\t\t\t// Hide loder\r\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope.hideLoader();\r\n\r\n\t\t\t\t\t\t// Cache image\r\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) imgObj.cached = true;\r\n\r\n\t\t\t\t\t\treturn deferred.resolve(imgObj);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn deferred.promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.setActiveImg = function(imgObj){\r\n\t\t\t\t\t// Get images move direction\r\n\t\t\t\t\tif(\r\n\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) == (scope.images.length - 1) ||\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) <= 0 && \r\n\t\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) != -(scope.images.length - 1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t){\r\n\t\t\t\t\t\tscope.imgMoveDirection = 'forward';\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tscope.imgMoveDirection = 'backward';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Load image\r\n\t\t\t\t\tscope.loadImg(imgObj).then(function(imgObj){\r\n\t\t\t\t\t\tscope.activeImg = imgObj;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t/***************************************************/\r\n\t\t\t\t\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tGallery settings\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Modify scope models\r\n\t\t\t\tscope.images \t \t = \t(scope.images \t\t!= undefined) ? scope.images \t : \t[];\r\n\t\t\t\tscope.methods \t \t = \t(scope.methods \t\t!= undefined) ? scope.methods \t : \t{};\r\n\t\t\t\tscope.conf \t \t\t = \t(scope.conf \t\t!= undefined) ? scope.conf \t\t : \t{};\r\n\r\n\t\t\t\t// setting options\r\n\t\t\t\tscope.$watchCollection('conf', function(conf){\r\n\t\t\t\t\tscope.thumbnails \t = \t(conf.thumbnails \t!= undefined) ? conf.thumbnails \t: \t(scope.thumbnails \t!= undefined) \t?  scope.thumbnails\t\t: \tngImageGalleryOpts.thumbnails;\r\n\t\t\t\t\tscope.inline \t \t = \t(conf.inline \t\t!= undefined) ? conf.inline \t \t: \t(scope.inline \t\t!= undefined) \t?  scope.inline\t\t\t: \tngImageGalleryOpts.inline;\r\n\t\t\t\t\tscope.bubbles \t \t = \t(conf.bubbles \t\t!= undefined) ? conf.bubbles \t \t: \t(scope.bubbles \t\t!= undefined) \t?  scope.bubbles\t\t: \tngImageGalleryOpts.bubbles;\r\n\t\t\t\t\tscope.imgBubbles \t = \t(conf.imgBubbles \t!= undefined) ? conf.imgBubbles \t: \t(scope.imgBubbles \t!= undefined) \t?  scope.imgBubbles\t\t: \tngImageGalleryOpts.imgBubbles;\r\n\t\t\t\t\tscope.bgClose \t \t = \t(conf.bgClose \t\t!= undefined) ? conf.bgClose \t \t: \t(scope.bgClose \t\t!= undefined) \t?  scope.bgClose\t\t: \tngImageGalleryOpts.bgClose;\r\n\t\t\t\t\tscope.piracy \t \t = \t(conf.piracy \t\t!= undefined) ? conf.piracy \t \t: \t(scope.piracy \t\t!= undefined) \t?  scope.piracy\t\t\t: \tngImageGalleryOpts.piracy;\r\n\t\t\t\t\tscope.imgAnim \t \t = \t(conf.imgAnim \t\t!= undefined) ? conf.imgAnim \t \t: \t(scope.imgAnim \t\t!= undefined) \t?  scope.imgAnim\t\t: \tngImageGalleryOpts.imgAnim;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscope.onOpen \t \t = \t(scope.onOpen \t\t!= undefined) ? scope.onOpen \t : \tangular.noop;\r\n\t\t\t\tscope.onClose \t \t = \t(scope.onClose \t\t!= undefined) ? scope.onClose \t : \tangular.noop;\r\n\t\t\t\t\r\n\t\t\t\t// If images populate dynamically, reset gallery\r\n\t\t\t\tvar imagesFirstWatch = true;\r\n\t\t\t\tscope.$watch('images', function(){\r\n\t\t\t\t\tif(imagesFirstWatch){\r\n\t\t\t\t\t\timagesFirstWatch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scope.images.length) scope.setActiveImg(\r\n\t\t\t\t\t\tscope.images[scope.activeImageIndex || 0]\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Watch index of visible/active image\r\n\t\t\t\t// If index changes, make sure to load/change image\r\n\t\t\t\tvar activeImageIndexFirstWatch = true;\r\n\t\t\t\tscope.$watch('activeImageIndex', function(newImgIndex){\r\n\t\t\t\t\tif(activeImageIndexFirstWatch){\r\n\t\t\t\t\t\tactiveImageIndexFirstWatch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scope.images.length){\r\n\t\t\t\t\t\tscope.setActiveImg(\r\n\t\t\t\t\t\t\tscope.images[newImgIndex]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Open modal automatically if inline\r\n\t\t\t\tscope.$watch('inline', function(){\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tif(scope.inline) scope.methods.open();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\r\n\t\t\t\t/***************************************************/\r\n\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tMethods\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Open gallery modal\r\n\t\t\t\tscope.methods.open = function(imgIndex){\r\n\t\t\t\t\t// Open modal from an index if one passed\r\n\t\t\t\t\tscope.activeImageIndex = (imgIndex) ? imgIndex : 0;\r\n\r\n\t\t\t\t\tscope.opened = true;\r\n\r\n\t\t\t\t\t// set overflow hidden to body\r\n\t\t\t\t\tif(!scope.inline) angular.element(document.body).addClass('body-overflow-hidden');\r\n\r\n\t\t\t\t\t// call open event after transition\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tscope.onOpen();\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Close gallery modal\r\n\t\t\t\tscope.methods.close = function(){\r\n\t\t\t\t\tscope.opened = false; // Model closed\r\n\r\n\t\t\t\t\t// set overflow hidden to body\r\n\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\r\n\r\n\t\t\t\t\t// call close event after transition\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tscope.onClose();\r\n\t\t\t\t\t\tscope.activeImageIndex = 0; // Reset index\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Change image to next\r\n\t\t\t\tscope.methods.next = function(){\r\n\t\t\t\t\tif(scope.activeImageIndex == (scope.images.length - 1)){\r\n\t\t\t\t\t\tscope.activeImageIndex = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tscope.activeImageIndex = scope.activeImageIndex + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Change image to prev\r\n\t\t\t\tscope.methods.prev = function(){\r\n\t\t\t\t\tif(scope.activeImageIndex == 0){\r\n\t\t\t\t\t\tscope.activeImageIndex = scope.images.length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tscope.activeImageIndex--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Close gallery on background click\r\n\t\t\t\tscope.backgroundClose = function(e){\r\n\t\t\t\t\tif(!scope.bgClose || scope.inline) return;\r\n\r\n\t\t\t\t\tvar noCloseClasses = [\r\n\t\t\t\t\t\t'galleria-image',\r\n\t\t\t\t\t\t'destroy-icons-container',\r\n\t\t\t\t\t\t'ext-url',\r\n\t\t\t\t\t\t'close',\r\n\t\t\t\t\t\t'next',\r\n\t\t\t\t\t\t'prev',\r\n\t\t\t\t\t\t'galleria-bubble'\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\t// check if clicked element has a class that\r\n\t\t\t\t\t// belongs to `noCloseClasses`\r\n\t\t\t\t\tfor(var i = 0; i < e.target.classList.length; i++){\r\n\t\t\t\t\t\tif(noCloseClasses.indexOf(e.target.classList[i]) != -1){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tscope.methods.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t/***************************************************/\r\n\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tUser interactions\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Key events\r\n\t\t\t\tangular.element(document).bind('keyup', function(event){\r\n\t\t\t\t\t// If inline modal, do not interact\r\n\t\t\t\t\tif(scope.inline) return;\r\n\r\n\t\t\t\t\tif(event.which == keys.right || event.which == keys.enter){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.next();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.which == keys.left){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.prev();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.which == keys.esc){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Swipe events\r\n\t\t\t\tif(window.Hammer){\r\n\t\t\t\t\tvar hammerElem = new Hammer(elem[0]);\r\n\t\t\t\t\thammerElem.on('swiperight', function(ev){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.prev();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\thammerElem.on('swipeleft', function(ev){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.next();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\thammerElem.on('doubletap', function(ev){\r\n\t\t\t\t\t\tif(scope.inline) return;\r\n\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t\t/***********************************************************/\r\n\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tActions on angular events\r\n\t\t\t\t**/\r\n\t\t\t\t\r\n\t\t\t\tvar removeClassFromDocumentBody = function(){\r\n\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t$rootScope.$on('$stateChangeSuccess', removeClassFromDocumentBody);\r\n\t\t\t\t$rootScope.$on('$routeChangeSuccess', removeClassFromDocumentBody);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}]);\r\n })();"]}