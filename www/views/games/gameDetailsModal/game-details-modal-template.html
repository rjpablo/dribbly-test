<div class="modal-header">
    <h3 class="modal-title" id="modal-title">Game Details</h3>
</div>
<div class="modal-body game-details-modal-body" id="modal-body">
    <form name="gameDetailsForm" class="" data-toggle="validator">
        <div class="block form-group" ng-class="{'has-error':gameDetailsForm.name.$invalid && gameDetailsForm.name.$touched}">
            <label class="control-label" for="name">Game Title:*</label>
            <input type="text" class="form-control" required minlength="5" name="name" ng-model="gameDetailsModalCtrl.game.title">
            <div class="help-block" ng-messages="gameDetailsForm.name.$error || gameDetailsForm.name.$touched" role="alert">
                <div ng-message="required">Game Title is required.</div>
                <div ng-message="minlength">Game Title must be at least 5 characters long.</div>
            </div>
        </div>
        <div class="form-group court" ng-class="[{hasValue:gameDetailsModalCtrl.game.court}, {'has-error':gameDetailsModalCtrl.validation.court.$invalid}]">
            <label class="control-label" for="court">Court:*</label>
            <court-stub show-controls="true" court="gameDetailsModalCtrl.game.court" delete-function="gameDetailsModalCtrl.removeCourt(court)" ></court-stub>
            <!--<span ng-if="gameDetailsModalCtrl.game.court">{{gameDetailsModalCtrl.game.court.name}}</span>-->
            <div class="edit-field"
                 angucomplete-alt id="court-autocomplete"
                 placeholder="Type to search by court name"
                 maxlength="50"
                 field-required="true"
                 field-required-class="missing"
                 pause="100"
                 selected-object="gameDetailsModalCtrl.courtSelected"
                 remote-url="{{gameDetailsModalCtrl.courtSearchRemoteUrl}}"
                 title-field="name"
                 minlength="1"
                 input-class="edit-field input-field form-control"
                 input-name="court"
                 match-class="highlight"
                 focus-first="true"></div>
            <div class="help-block" ng-messages="gameDetailsForm.name.$error" role="alert">
                <div class="error-msg required" ng-class="[{'active':gameDetailsModalCtrl.validation.court.required}]" >Court is required.</div>
            </div>
        </div>
        <div class="form-group schedule" ng-class="[{'has-error':gameDetailsModalCtrl.validation.schedule.$invalid}]" >
            <label class="control-label" for="court">Schedule:*</label><!--<span>{{gameDetailsModalCtrl.game.schedule | date : 'EEE, MMM d, y h:mm:ss a'}}</span>-->
            <!--<input type="text" name="court" ng-model="gameDetailsModalCtrl.game.schedule" />-->
            <div class="dropdown">
                <p ng-if="!gameDetailsModalCtrl.game.schedule" class="sched-dd-toggle dropdown-toggle button-link" role="button" data-toggle="dropdown">Select schedule</p>
                <p ng-if="gameDetailsModalCtrl.game.schedule" class="sched-dd-toggle dropdown-toggle button-link" role="button" data-toggle="dropdown">{{gameDetailsModalCtrl.game.schedule | date : 'EEE, MMM d, y h:mm:ss a'}}</p>
                <ul class="dropdown-menu" role="menu">
                    <datetimepicker data-ng-model="gameDetailsModalCtrl.game.schedule" on-set-time="gameDetailsModalCtrl.schedSelected(newDate, oldDate)" data-datetimepicker-config="{ dropdownSelector: '.sched-dd-toggle', minuteStep: 30 }" />
                </ul>
            </div>
            <div class="help-block" role="alert">
                <div class="error-msg" ng-class="[{'active':gameDetailsModalCtrl.validation.schedule.required}]">Court is required.</div>
                <div class="error-msg" ng-class="[{'active':gameDetailsModalCtrl.validation.schedule.invalid}]">Invalid date. Please select a future date.</div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label" for="court">Password(optional):</label>
            <input type="text" style="height: 0; width: 0; border:none; display:inline;" /> <!--workaround to avoid autofill on court name field--> 
            <input type="password" name="court" class="form-control" ng-model="gameDetailsModalCtrl.game.password" />
        </div>
        <div id="team-options">
            <div id="teamA-options">
                <div class="hr-sect">Team A Options</div>
                <table>
                    <tr class="form-group">
                        <td>
                            <label class="control-label" for="court">Who can join:</label>
                        </td>
                        <td>
                            <label class="radio-inline">
                                <input type="radio" ng-checked="gameDetailsModalCtrl.game.allowedToJoinTeamA == 0" ng-model="gameDetailsModalCtrl.game.allowedToJoinTeamA" value="0" /> Individual Players Only
                            </label>                            
                            <label class="radio-inline">
                                <input type="radio" ng-checked="gameDetailsModalCtrl.game.allowedToJoinTeamA == 1" ng-model="gameDetailsModalCtrl.game.allowedToJoinTeamA" value="1" /> Teams Only
                            </label>                            
                        </td>
                    </tr>
                    <tr class="form-group">
                        <td>
                            <label class="control-label" for="court">Password(optional):</label>
                        </td>
                        <td>
                            <input type="password" name="court" class="form-control" ng-disabled="gameDetailsModalCtrl.game.allowedToJoinTeamA == 1" ng-model="gameDetailsModalCtrl.game.teamAPassword" />
                        </td>
                    </tr>
                </table>
            </div>
            <div id="teamB-options">
                <div class="hr-sect">Team B Options</div>
                <table>
                    <tr class="form-group">
                        <td>
                            <label class="control-label" for="court">Who can join:</label>
                        </td>
                        <td>
                            <label class="radio-inline">
                                <input type="radio" ng-checked="gameDetailsModalCtrl.allowIndPlayerToJoinTeamB" ng-model="gameDetailsModalCtrl.game.allowedToJoinTeamB" value="0" /> Individual Players Only
                            </label>
                            <label class="radio-inline">
                                <input type="radio" ng-model="gameDetailsModalCtrl.game.allowedToJoinTeamB" value="1" /> Teams Only
                            </label>
                        </td>
                    </tr>
                    <tr class="form-group">
                        <td>
                            <label class="control-label" for="court">Password(optional):</label>
                        </td>
                        <td>
                            <input type="password" name="court" class="form-control" ng-disabled="gameDetailsModalCtrl.game.allowedToJoinTeamB == 1" ng-model="gameDetailsModalCtrl.game.teamBPassword" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
</form>
</div>
<div class="modal-footer">
    <button class="btn btn-primary" ng-disabled="{{gameDetailsModalCtrl.saving}}" type="button" ng-click="gameDetailsModalCtrl.ok(gameDetailsForm)">{{gameDetailsModalCtrl.saving?'Creating...':'Create'}}</button>
    <button class="btn btn-warning" type="button" ng-click="gameDetailsModalCtrl.cancel()">Cancel</button>
</div>